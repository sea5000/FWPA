<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.6.0">
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect">
    <link as="style"
        href="https://fonts.googleapis.com/css2?display=swap&amp;family=Plus+Jakarta+Sans%3Awght%40400%3B500%3B700%3B800"
        onload="this.rel='stylesheet'" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/theme.css">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
    <title>Bookme Community</title>
    <link href="data:image/x-icon;base64," rel="icon" type="image/x-icon">
</head>
  <style>
    :root {
      --primary: #2badee;
      --bg-light: #f6f7f8;
      --bg-dark: #101c22;
    }

    body {
      font-family: 'Plus Jakarta Sans', sans-serif;
      background-color: var(--bg-light);
      color: #333;
    }

    body.dark-mode {
      background-color: var(--bg-dark);
      color: #ddd;
    }

    .navbar {
      border-bottom: 1px solid rgba(0,0,0,0.1);
      background-color: var(--bg-light);
    }

    .dark-mode .navbar {
      background-color: var(--bg-dark);
      border-color: rgba(255,255,255,0.1);
    }

    .nav-link.active {
      color: var(--primary) !important;
      font-weight: 700;
    }

    .card {
      border: none;
      border-radius: 1rem;
      box-shadow: 0 1px 3px rgba(0,0,0,0.08);
      background-color: #fff;
    }

    .dark-mode .card {
      background-color: rgba(255,255,255,0.05);
      border-color: rgba(255,255,255,0.15);
    }

    .post-header img {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      object-fit: cover;
    }

    .post-actions button {
      background: none;
      border: none;
      color: #666;
      font-weight: 500;
    }

    .post-actions button:hover {
      color: var(--primary);
    }

    footer {
      border-top: 1px solid rgba(0,0,0,0.1);
      background-color: var(--bg-light);
    }

    .dark-mode footer {
      background-color: var(--bg-dark);
      border-color: rgba(255,255,255,0.1);
    }

    .btn-primary {
      background-color: var(--primary);
      border-color: var(--primary);
    }
    .btn-primary:hover {
      background-color: #1b8ecb;
    }
  </style>
<body class="bg-light text-dark">
    <div class="d-flex flex-column min-vh-100">
        <header class="w-100 site-header">
            <div class="container d-flex align-items-center justify-content-between py-3">
                <div class="d-flex align-items-center">
                    <div class="me-2" style="width:40px;height:40px;color:var(--bs-primary);">
                        <span class="material-symbols-outlined fs-3 text-primary">book</span>
                    </div>
                    <h1 class="h5 mb-0 ms-2">Bookme</h1>
                </div>
                <nav class="nav-centered d-none d-md-flex align-items-center gap-2">
                    <a class="btn btn-sm btn-light rounded-pill" href="{{ url_for('dashboard.index') }}">Home</a>
                    <a class="btn btn-sm btn-light rounded-pill" href="{{ url_for('study.index') }}">Study</a>
                    <a class="btn btn-sm btn-primary rounded-pill text-white" href="{{ url_for('community.index') }}">Community</a>
                    <a class="btn btn-sm btn-light rounded-pill" href="{{ url_for('challenges.index') }}">Challenge</a>
                </nav>
                <div class="d-none d-md-flex align-items-center header-actions">
                    <button type="button" class="btn btn-link text-muted p-0" aria-label="Notifications" title="Notifications">
                        <span class="material-symbols-outlined">notifications</span>
                    </button>
                    <div class="dropdown">
                      <a class="btn btn-link text-muted p-0 dropdown-toggle" href="{{ url_for('profile.index') }}" id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Profile" title="Profile">
                        <span class="material-symbols-outlined fs-3">account_circle</span>
                      </a>
                      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                        <li><h6 class="dropdown-header">Account</h6></li>
                        <li><a class="dropdown-item" href="{{ url_for('profile.index') }}">Profile & Settings</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li>
                          <form method="POST" action="{{ url_for('auth.logout') }}" class="m-0">
                            <button type="submit" class="dropdown-item">Log out</button>
                          </form>
                        </li>
                      </ul>
                    </div>
                </div>
            </div>
        </header>
        <main class="flex-grow-1">
            <div class="container my-5">
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <h2 class="h3 mb-0">Community</h2><small class="text-muted">Connect with others</small>
                </div>

        <ul class="nav nav-tabs mb-4" role="tablist">
          <li class="nav-item" role="presentation"><a class="nav-link" href = "{{url_for('community.index') }}" id="notes-tab"
              data-bs-toggle="tab" data-bs-target="#notes" type="button" role="tab" aria-controls="notes" aria-selected="false">Notes</a></li>
          <li class="nav-item" role="presentation"><button class="nav-link active" id="friends-tab" 
              data-bs-toggle="tab" data-bs-target="#friends" type="button" role="tab" aria-controls="friends" aria-selected="true">Friends</button></li>
          <li class="nav-item" role="presentation"><a class="nav-link" href="{{ url_for('feed.index') }}" id="feed-tab" 
              data-bs-toggle="tab" data-bs-target="#feed" type="button" role="tab" aria-controls="feed" aria-selected="false">Feed</a></li>

                    <!--<li class="nav-item" role="presentation"><a class="nav-link" href="index.html" id="notes-tab" aria-controls="notes"
                      aria-selected="false">Notes</a></button></li>
                    <li class="nav-item" role="presentation"><a class="nav-link" href="friends.html" id="friends-tab" aria-controls="friends" 
                      aria-selected="false">Friends</a></button></li>
                    <li class="nav-item" role="presentation"><a class="nav-link" href="feed.html" id="feed-tab" aria-controls="feed" 
                      aria-selected="false">Feed</a></button></li>-->
                </ul>
<body class="p-4">

  <div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="fw-bold">Your Friends</h2>
      <button class="btn btn-outline-primary" onclick="addFriend()">+ Add Friend</button>
    </div>

    <div id="friends-list" class="row gy-3">
      <!-- Friend cards appear here -->
    </div>
  </div>

  <script>
    // Sample data (in a real app, this comes from a database)
    let friends = JSON.parse(localStorage.getItem('friendsData')) || [
      { id: 1, name: "Alex Carter", studyTime: 120, flashScore: 85, streak: 3, following: false, img: "https://randomuser.me/api/portraits/men/32.jpg" },
      { id: 2, name: "{{username}} Johnson", studyTime: 200, flashScore: 90, streak: 7, following: true, img: "https://randomuser.me/api/portraits/women/44.jpg" },
      { id: 3, name: "Mark Lee", studyTime: 75, flashScore: 70, streak: 2, following: false, img: "https://randomuser.me/api/portraits/men/56.jpg" }
    ];

    function renderFriends() {
      const list = document.getElementById('friends-list');
      list.innerHTML = '';

      friends.forEach(friend => {
        const col = document.createElement('div');
        col.className = 'col-md-6';

        col.innerHTML = `
          <div class="friend-card p-3 d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
              <img src="${friend.img}" class="profile-img me-3" alt="${friend.name}">
              <div>
                <h5 class="mb-1">${friend.name}</h5>
                <div class="stats">
                  <small>Study: ${friend.studyTime} min â€¢ Flashcards: ${friend.flashScore}% â€¢ Streak: ${friend.streak} ðŸ”¥</small>
                </div>
              </div>
            </div>
            <button class="btn ${friend.following ? 'btn-secondary' : 'btn-primary'} btn-sm" onclick="toggleFollow(${friend.id})">
              ${friend.following ? 'Following' : 'Follow'}
            </button>
          </div>
        `;
        list.appendChild(col);
      });
    }

    function toggleFollow(id) {
      const friend = friends.find(f => f.id === id);
      if (friend) {
        friend.following = !friend.following;
        saveData();
        renderFriends();
      }
    }

    function addFriend() {
      const name = prompt("Enter your friend's name:");
      if (name) {
        const newFriend = {
          id: Date.now(),
          name,
          studyTime: Math.floor(Math.random() * 200),
          flashScore: Math.floor(Math.random() * 100),
          streak: Math.floor(Math.random() * 10),
          following: false,
          img: `https://randomuser.me/api/portraits/${Math.random() > 0.5 ? 'men' : 'women'}/${Math.floor(Math.random()*80)}.jpg`
        };
        friends.push(newFriend);
        saveData();
        renderFriends();
      }
    }

    function saveData() {
      localStorage.setItem('friendsData', JSON.stringify(friends));
    }

    // Initial render
    renderFriends();
  </script>
</body>
</main>
<!-- Footer -->
  <footer class="d-md-none py-3">
    <div class="container d-flex justify-content-around text-center">
      <a href="#" class="text-decoration-none text-muted"><small>Study</small></a>
      <a href="#" class="text-decoration-none text-muted"><small>Community</small></a>
      <a href="#" class="text-decoration-none text-primary fw-bold"><small>Feed</small></a>
    </div>
  </footer>

 
      <script src="https://cdn.jsdelivr.net/npm/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script>

        document.addEventListener('DOMContentLoaded', function () {
            try {
                const navAreas = [];
                const header = document.querySelector('header');
                if (header) navAreas.push(header);
                const footers = Array.from(document.querySelectorAll('footer'));
                navAreas.push(...footers);
                const parts = location.pathname.split('/').filter(Boolean);
                const currentSlug = parts.length >= 2 ? parts[parts.length - 2] : (parts[0] || 'home');

                navAreas.forEach(area => {
                    const links = Array.from(area.querySelectorAll('a[href]'));
                    links.forEach(a => {
                        try {
                            const url = new URL(a.getAttribute('href'), location.origin);
                            const linkParts = url.pathname.split('/').filter(Boolean);
                            const linkSlug = linkParts.length >= 2 ? linkParts[linkParts.length - 2] : (linkParts[0] || 'home');

                            a.classList.remove('active', 'text-primary', 'fw-bold', 'text-white', 'btn-primary');

                            if (linkSlug === currentSlug) {
                                if (a.classList.contains('btn')) {
                                    a.classList.remove('btn-light');
                                    a.classList.add('btn-primary', 'text-white');
                                } else {
                                    a.classList.add('text-primary', 'fw-bold');
                                }
                                a.classList.add('active');
                            } else {
                                if (!a.classList.contains('btn')) {
                                    a.classList.remove('text-primary', 'fw-bold');
                                    a.classList.add('text-muted');
                                }
                                if (a.classList.contains('btn') && !a.classList.contains('btn-light')) {
                                    a.classList.add('btn-light');
                                }
                            }
                        } catch (e) { }
                    });
                });
            } catch (e) { }
        });
    </script>
</body>
</html>
